#region license
// Copyright 2025 Utah Departement of Transportation
// for Data - Utah.Udot.Atspm.Data.Models/Area.cs
// 
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
// 
// http://www.apache.org/licenses/LICENSE-2.
// 
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
#endregion

// <auto-generated> This file has been auto generated by EF Core Power Tools. </auto-generated>
using Newtonsoft.Json;
using Utah.Udot.Atspm.Data.Models.ConfigurationModels;
using Utah.Udot.Atspm.Data.Relationships;
using Utah.Udot.NetStandardToolkit.Interfaces;

namespace Utah.Udot.Atspm.Data.Models
{
    /// <summary>
    /// Represents a log entry for API usage, capturing details about requests, responses,
    /// performance, and user-related metadata.
    /// </summary>
    public class UsageEntry : AtspmConfigModelBase<int>, ITimestamp
    {
        ///// <summary>
        ///// Database identifier for the log entry.
        ///// </summary>
        //public int Id { get; set; }

        /// <summary>
        /// Gets or sets the name of the API endpoint accessed.
        /// </summary>
        public string ApiName { get; set; }

        /// <summary>
        /// Gets or sets the UTC timestamp when the log entry was created.
        /// </summary>
        public DateTime Timestamp { get; set; }

        /// <summary>
        /// Gets or sets the unique trace identifier for the request, useful for correlation.
        /// </summary>
        public string TraceId { get; set; }

        /// <summary>
        /// Gets or sets the connection identifier assigned by the server.
        /// </summary>
        public string ConnectionId { get; set; }

        /// <summary>
        /// Gets or sets the remote IP address of the client making the request.
        /// </summary>
        public string RemoteIp { get; set; }

        /// <summary>
        /// Gets or sets the User-Agent string provided by the client, identifying browser or client software.
        /// </summary>
        public string UserAgent { get; set; }

        /// <summary>
        /// Gets or sets the identifier of the authenticated user, if available.
        /// </summary>
        public string UserId { get; set; }

        /// <summary>
        /// Gets or sets the request path (route) accessed by the client.
        /// </summary>
        public string Route { get; set; }

        /// <summary>
        /// Gets or sets the query string parameters included in the request.
        /// </summary>
        public string QueryString { get; set; }

        /// <summary>
        /// Gets or sets the HTTP method used for the request (e.g., GET, POST).
        /// </summary>
        public string Method { get; set; }

        /// <summary>
        /// Gets or sets the HTTP status code returned in the response.
        /// </summary>
        public int StatusCode { get; set; }

        /// <summary>
        /// Gets or sets the total duration of the request in milliseconds.
        /// </summary>
        public long DurationMs { get; set; }

        /// <summary>
        /// Gets or sets the name of the controller that handled the request, if applicable.
        /// </summary>
        public string Controller { get; set; }

        /// <summary>
        /// Gets or sets the name of the action method that handled the request, if applicable.
        /// </summary>
        public string Action { get; set; }

        /// <summary>
        /// Gets or sets the number of items returned in the response, if applicable.
        /// </summary>
        public int? ResultCount { get; set; }

        /// <summary>
        /// Gets or sets the size of the response payload in bytes.
        /// </summary>
        public long? ResultSizeBytes { get; set; }

        /// <summary>
        /// Gets or sets a value indicating whether the request was successful (status code 2xx).
        /// </summary>
        public bool Success { get; set; }

        /// <summary>
        /// Gets or sets the error message if an exception occurred during request processing.
        /// </summary>
        public string ErrorMessage { get; set; }

        /// <summary>
        /// Returns a JSON-formatted string representation of the log entry.
        /// </summary>
        /// <returns>A JSON string containing the log details.</returns>
        public override string ToString()
        {
            return JsonConvert.SerializeObject(this, formatting: Formatting.Indented);
        }
    }
}