DO $$
BEGIN
   IF NOT EXISTS (SELECT FROM pg_database WHERE datname = 'ATSPM-Config') THEN
      PERFORM dblink_exec('dbname=postgres user=admin password=Avenue.2006', 'CREATE DATABASE ATSPPM-Config');
   END IF;
END
$$;

CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);

START TRANSACTION;

CREATE TABLE "Areas" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(50) NOT NULL,
    CONSTRAINT "PK_Areas" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "Areas" IS 'Areas';

CREATE TABLE "DetectionTypes" (
    "Id" integer NOT NULL,
    "Description" character varying(128) NOT NULL,
    "Abbreviation" character varying(5) NULL,
    "DisplayOrder" integer NOT NULL,
    CONSTRAINT "PK_DetectionTypes" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "DetectionTypes" IS 'Detector Types';

CREATE TABLE "DirectionTypes" (
    "Id" integer NOT NULL,
    "Description" character varying(30) NULL,
    "Abbreviation" character varying(5) NULL,
    "DisplayOrder" integer NOT NULL,
    CONSTRAINT "PK_DirectionTypes" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "DirectionTypes" IS 'Direction Types';

CREATE TABLE "ExternalLinks" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(64) NOT NULL,
    "Url" character varying(512) NOT NULL,
    "DisplayOrder" integer NOT NULL,
    CONSTRAINT "PK_ExternalLinks" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "ExternalLinks" IS 'External Links';

CREATE TABLE "Faqs" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Header" character varying(256) NOT NULL,
    "Body" character varying(8000) NOT NULL,
    "DisplayOrder" integer NOT NULL,
    CONSTRAINT "PK_Faqs" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "Faqs" IS 'Frequently Asked Questions';

CREATE TABLE "Jurisdictions" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(50) NOT NULL,
    "Mpo" character varying(50) NULL,
    "CountyParish" character varying(50) NULL,
    "OtherPartners" character varying(50) NULL,
    CONSTRAINT "PK_Jurisdictions" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "Jurisdictions" IS 'Jurisdictions';

CREATE TABLE "LocationTypes" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(50) NOT NULL,
    "Icon" text NULL,
    CONSTRAINT "PK_LocationTypes" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "LocationTypes" IS 'Location Types';

CREATE TABLE "MeasureComments" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "TimeStamp" timestamp NOT NULL,
    "Comment" character varying(255) NULL,
    "LocationIdentifier" character varying(10) NOT NULL,
    CONSTRAINT "PK_MeasureComments" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "MeasureComments" IS 'Measure Comments';

CREATE TABLE "MeasureType" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(50) NULL,
    "Abbreviation" character varying(8) NULL,
    "ShowOnWebsite" boolean NOT NULL,
    "ShowOnAggregationSite" boolean NOT NULL,
    "DisplayOrder" integer NOT NULL,
    CONSTRAINT "PK_MeasureType" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "MeasureType" IS 'Measure Types';

CREATE TABLE "MenuItems" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(128) NOT NULL,
    "Icon" text NULL,
    "DisplayOrder" integer NOT NULL,
    "Link" character varying(4000) NULL,
    "Document" bytea NULL,
    "ParentId" integer NULL,
    CONSTRAINT "PK_MenuItems" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_MenuItems_MenuItems_ParentId" FOREIGN KEY ("ParentId") REFERENCES "MenuItems" ("Id") ON DELETE RESTRICT
);
COMMENT ON TABLE "MenuItems" IS 'Menu Items';

CREATE TABLE "Products" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Manufacturer" character varying(48) NOT NULL,
    "Model" character varying(48) NOT NULL,
    "WebPage" text NULL,
    "Notes" character varying(512) NULL,
    CONSTRAINT "PK_Products" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "Products" IS 'Products';

CREATE TABLE "Regions" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Description" character varying(50) NOT NULL,
    CONSTRAINT "PK_Regions" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "Regions" IS 'Regions';

CREATE TABLE "RouteDistances" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Distance" double precision NOT NULL,
    "LocationIdentifierA" character varying(10) NOT NULL,
    "LocationIdentifierB" character varying(10) NOT NULL,
    CONSTRAINT "PK_RouteDistances" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "RouteDistances" IS 'Route Distances';

CREATE TABLE "Routes" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(50) NULL,
    CONSTRAINT "PK_Routes" PRIMARY KEY ("Id")
);
COMMENT ON TABLE "Routes" IS 'Location Routes';

CREATE TABLE "VersionHistory" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(64) NOT NULL,
    "Notes" character varying(512) NULL,
    "Date" timestamp NOT NULL DEFAULT TIMESTAMP '2024-08-05 13:27:10.932131',
    "Version" integer NOT NULL,
    "ParentId" integer NULL,
    CONSTRAINT "PK_VersionHistory" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_VersionHistory_VersionHistory_ParentId" FOREIGN KEY ("ParentId") REFERENCES "VersionHistory" ("Id") ON DELETE RESTRICT
);
COMMENT ON TABLE "VersionHistory" IS 'Version History';

CREATE TABLE "WatchDogLogEvents" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "locationId" integer NOT NULL,
    "locationIdentifier" text NOT NULL,
    "Timestamp" timestamp NOT NULL,
    "ComponentType" integer NOT NULL,
    "ComponentId" integer NOT NULL,
    "IssueType" integer NOT NULL,
    "Details" text NOT NULL,
    "Phase" integer NULL,
    CONSTRAINT "PK_WatchDogLogEvents" PRIMARY KEY ("Id")
);

CREATE TABLE "UserAreas" (
    "UserId" text NOT NULL,
    "AreaId" integer NOT NULL,
    CONSTRAINT "PK_UserAreas" PRIMARY KEY ("UserId", "AreaId"),
    CONSTRAINT "FK_UserAreas_Areas_AreaId" FOREIGN KEY ("AreaId") REFERENCES "Areas" ("Id") ON DELETE CASCADE
);
COMMENT ON TABLE "UserAreas" IS 'UserAreas';

CREATE TABLE "UserJurisdictions" (
    "UserId" text NOT NULL,
    "JurisdictionId" integer NOT NULL,
    CONSTRAINT "PK_UserJurisdictions" PRIMARY KEY ("UserId", "JurisdictionId"),
    CONSTRAINT "FK_UserJurisdictions_Jurisdictions_JurisdictionId" FOREIGN KEY ("JurisdictionId") REFERENCES "Jurisdictions" ("Id") ON DELETE CASCADE
);

CREATE TABLE "DetectionTypeMeasureType" (
    "DetectionTypesId" integer NOT NULL,
    "MeasureTypesId" integer NOT NULL,
    CONSTRAINT "PK_DetectionTypeMeasureType" PRIMARY KEY ("DetectionTypesId", "MeasureTypesId"),
    CONSTRAINT "FK_DetectionTypeMeasureType_DetectionTypes_DetectionTypesId" FOREIGN KEY ("DetectionTypesId") REFERENCES "DetectionTypes" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_DetectionTypeMeasureType_MeasureType_MeasureTypesId" FOREIGN KEY ("MeasureTypesId") REFERENCES "MeasureType" ("Id") ON DELETE CASCADE
);

CREATE TABLE "MeasureCommentMeasureType" (
    "MeasureCommentsId" integer NOT NULL,
    "MeasureTypesId" integer NOT NULL,
    CONSTRAINT "PK_MeasureCommentMeasureType" PRIMARY KEY ("MeasureCommentsId", "MeasureTypesId"),
    CONSTRAINT "FK_MeasureCommentMeasureType_MeasureComments_MeasureCommentsId" FOREIGN KEY ("MeasureCommentsId") REFERENCES "MeasureComments" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_MeasureCommentMeasureType_MeasureType_MeasureTypesId" FOREIGN KEY ("MeasureTypesId") REFERENCES "MeasureType" ("Id") ON DELETE CASCADE
);

CREATE TABLE "MeasureOptions" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Option" character varying(128) NULL,
    "Value" character varying(512) NULL,
    "MeasureTypeId" integer NOT NULL,
    CONSTRAINT "PK_MeasureOptions" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_MeasureOptions_MeasureType_MeasureTypeId" FOREIGN KEY ("MeasureTypeId") REFERENCES "MeasureType" ("Id") ON DELETE CASCADE
);
COMMENT ON TABLE "MeasureOptions" IS 'Measure Options';

CREATE TABLE "DeviceConfigurations" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Firmware" character varying(16) NOT NULL,
    "Notes" character varying(512) NULL,
    "Protocol" character varying(7) NOT NULL DEFAULT 'Unknown',
    "Port" bigint NOT NULL DEFAULT (((0))),
    "Directory" character varying(512) NULL,
    "SearchTerms" character varying(512) NULL,
    "ConnectionTimeout" integer NOT NULL DEFAULT (((2000))),
    "OperationTimeout" integer NOT NULL DEFAULT (((2000))),
    "DataModel" character varying(512) NULL,
    "UserName" character varying(50) NULL,
    "Password" character varying(50) NULL,
    "ProductId" integer NULL,
    CONSTRAINT "PK_DeviceConfigurations" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_DeviceConfigurations_Products_ProductId" FOREIGN KEY ("ProductId") REFERENCES "Products" ("Id")
);
COMMENT ON TABLE "DeviceConfigurations" IS 'Device Configuration';

CREATE TABLE "Locations" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Latitude" double precision NOT NULL,
    "Longitude" double precision NOT NULL,
    "PrimaryName" character varying(100) NOT NULL DEFAULT (('')),
    "SecondaryName" character varying(100) NULL,
    "ChartEnabled" boolean NOT NULL,
    "VersionAction" integer NOT NULL DEFAULT (((10))),
    "Note" character varying(256) NOT NULL DEFAULT (('Initial')),
    "Start" timestamp NOT NULL,
    "PedsAre1to1" boolean NOT NULL,
    "LocationIdentifier" character varying(10) NOT NULL,
    "JurisdictionId" integer NULL DEFAULT (((0))),
    "LocationTypeId" integer NOT NULL,
    "RegionId" integer NULL,
    CONSTRAINT "PK_Locations" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Locations_Jurisdictions_JurisdictionId" FOREIGN KEY ("JurisdictionId") REFERENCES "Jurisdictions" ("Id"),
    CONSTRAINT "FK_Locations_LocationTypes_LocationTypeId" FOREIGN KEY ("LocationTypeId") REFERENCES "LocationTypes" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Locations_Regions_RegionId" FOREIGN KEY ("RegionId") REFERENCES "Regions" ("Id")
);
COMMENT ON TABLE "Locations" IS 'Locations';

CREATE TABLE "UserRegions" (
    "UserId" text NOT NULL,
    "RegionId" integer NOT NULL,
    CONSTRAINT "PK_UserRegions" PRIMARY KEY ("UserId", "RegionId"),
    CONSTRAINT "FK_UserRegions_Regions_RegionId" FOREIGN KEY ("RegionId") REFERENCES "Regions" ("Id") ON DELETE CASCADE
);

CREATE TABLE "RouteLocations" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Order" integer NOT NULL,
    "PrimaryPhase" integer NOT NULL,
    "OpposingPhase" integer NOT NULL,
    "PrimaryDirectionId" integer NOT NULL,
    "OpposingDirectionId" integer NOT NULL,
    "IsPrimaryOverlap" boolean NOT NULL,
    "IsOpposingOverlap" boolean NOT NULL,
    "PreviousLocationDistanceId" integer NULL,
    "NextLocationDistanceId" integer NULL,
    "LocationIdentifier" character varying(10) NOT NULL,
    "RouteId" integer NOT NULL,
    CONSTRAINT "PK_RouteLocations" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_RouteLocations_DirectionTypes_OpposingDirectionId" FOREIGN KEY ("OpposingDirectionId") REFERENCES "DirectionTypes" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_RouteLocations_DirectionTypes_PrimaryDirectionId" FOREIGN KEY ("PrimaryDirectionId") REFERENCES "DirectionTypes" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_RouteLocations_RouteDistances_NextLocationDistanceId" FOREIGN KEY ("NextLocationDistanceId") REFERENCES "RouteDistances" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_RouteLocations_RouteDistances_PreviousLocationDistanceId" FOREIGN KEY ("PreviousLocationDistanceId") REFERENCES "RouteDistances" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_RouteLocations_Routes_RouteId" FOREIGN KEY ("RouteId") REFERENCES "Routes" ("Id") ON DELETE CASCADE
);
COMMENT ON TABLE "RouteLocations" IS 'Route Locations';

CREATE TABLE "Approaches" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Description" text NULL,
    "Mph" integer NULL,
    "ProtectedPhaseNumber" integer NOT NULL,
    "IsProtectedPhaseOverlap" boolean NOT NULL,
    "PermissivePhaseNumber" integer NULL,
    "IsPermissivePhaseOverlap" boolean NOT NULL,
    "PedestrianPhaseNumber" integer NULL,
    "IsPedestrianPhaseOverlap" boolean NOT NULL,
    "PedestrianDetectors" text NULL,
    "LocationId" integer NOT NULL,
    "DirectionTypeId" integer NOT NULL,
    CONSTRAINT "PK_Approaches" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Approaches_DirectionTypes_DirectionTypeId" FOREIGN KEY ("DirectionTypeId") REFERENCES "DirectionTypes" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Approaches_Locations_LocationId" FOREIGN KEY ("LocationId") REFERENCES "Locations" ("Id") ON DELETE CASCADE
);
COMMENT ON TABLE "Approaches" IS 'Approaches';

CREATE TABLE "AreaLocation" (
    "AreasId" integer NOT NULL,
    "LocationsId" integer NOT NULL,
    CONSTRAINT "PK_AreaLocation" PRIMARY KEY ("AreasId", "LocationsId"),
    CONSTRAINT "FK_AreaLocation_Areas_AreasId" FOREIGN KEY ("AreasId") REFERENCES "Areas" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_AreaLocation_Locations_LocationsId" FOREIGN KEY ("LocationsId") REFERENCES "Locations" ("Id") ON DELETE CASCADE
);

CREATE TABLE "Devices" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "LoggingEnabled" boolean NOT NULL,
    "Ipaddress" character varying(15) NOT NULL DEFAULT (('0.0.0.0')),
    "DeviceStatus" character varying(14) NOT NULL DEFAULT 'Unknown',
    "DeviceType" character varying(16) NOT NULL DEFAULT 'Unknown',
    "Notes" character varying(512) NULL,
    "LocationId" integer NOT NULL,
    "DeviceConfigurationId" integer NULL,
    CONSTRAINT "PK_Devices" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Devices_DeviceConfigurations_DeviceConfigurationId" FOREIGN KEY ("DeviceConfigurationId") REFERENCES "DeviceConfigurations" ("Id"),
    CONSTRAINT "FK_Devices_Locations_LocationId" FOREIGN KEY ("LocationId") REFERENCES "Locations" ("Id") ON DELETE CASCADE
);
COMMENT ON TABLE "Devices" IS 'Devices';

CREATE TABLE "Detectors" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "DectectorIdentifier" character varying(50) NOT NULL,
    "DetectorChannel" integer NOT NULL,
    "DistanceFromStopBar" integer NULL,
    "MinSpeedFilter" integer NULL,
    "DateAdded" timestamp NOT NULL,
    "DateDisabled" timestamp NULL,
    "LaneNumber" integer NULL,
    "MovementType" integer NOT NULL,
    "LaneType" integer NOT NULL,
    "DetectionHardware" integer NOT NULL,
    "DecisionPoint" integer NULL,
    "MovementDelay" integer NULL,
    "LatencyCorrection" double precision NOT NULL,
    "ApproachId" integer NOT NULL,
    CONSTRAINT "PK_Detectors" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Detectors_Approaches_ApproachId" FOREIGN KEY ("ApproachId") REFERENCES "Approaches" ("Id") ON DELETE CASCADE
);
COMMENT ON TABLE "Detectors" IS 'Detectors';

CREATE TABLE "DetectionTypeDetector" (
    "DetectionTypesId" integer NOT NULL,
    "DetectorsId" integer NOT NULL,
    CONSTRAINT "PK_DetectionTypeDetector" PRIMARY KEY ("DetectionTypesId", "DetectorsId"),
    CONSTRAINT "FK_DetectionTypeDetector_DetectionTypes_DetectionTypesId" FOREIGN KEY ("DetectionTypesId") REFERENCES "DetectionTypes" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_DetectionTypeDetector_Detectors_DetectorsId" FOREIGN KEY ("DetectorsId") REFERENCES "Detectors" ("Id") ON DELETE CASCADE
);

CREATE TABLE "DetectorComments" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "TimeStamp" timestamp NOT NULL,
    "Comment" character varying(256) NOT NULL,
    "DetectorId" integer NOT NULL,
    CONSTRAINT "PK_DetectorComments" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_DetectorComments_Detectors_DetectorId" FOREIGN KEY ("DetectorId") REFERENCES "Detectors" ("Id") ON DELETE CASCADE
);
COMMENT ON TABLE "DetectorComments" IS 'Detector Comments';

INSERT INTO "DetectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (0, 'NA', 'Unknown', 0);
INSERT INTO "DetectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (1, 'B', 'Basic', 1);
INSERT INTO "DetectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (2, 'AC', 'Advanced Count', 2);
INSERT INTO "DetectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (3, 'AS', 'Advanced Speed', 3);
INSERT INTO "DetectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (4, 'LLC', 'Lane-by-lane Count', 4);
INSERT INTO "DetectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (5, 'LLS', 'Lane-by-lane with Speed Restriction', 5);
INSERT INTO "DetectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (6, 'SBP', 'Stop Bar Presence', 6);
INSERT INTO "DetectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (7, 'AP', 'Advanced Presence', 7);
INSERT INTO "DetectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (8, 'P', 'Passage', 8);
INSERT INTO "DetectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (9, 'D', 'Demand', 9);
INSERT INTO "DetectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (10, 'IQ', 'Intermediate Queue', 10);
INSERT INTO "DetectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (11, 'EQ', 'Excessive Queue', 11);

INSERT INTO "DirectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (0, 'NA', 'Unknown', 0);
INSERT INTO "DirectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (1, 'NB', 'Northbound', 3);
INSERT INTO "DirectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (2, 'SB', 'Southbound', 4);
INSERT INTO "DirectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (3, 'EB', 'Eastbound', 1);
INSERT INTO "DirectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (4, 'WB', 'Westbound', 2);
INSERT INTO "DirectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (5, 'NE', 'Northeast', 5);
INSERT INTO "DirectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (6, 'NW', 'Northwest', 6);
INSERT INTO "DirectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (7, 'SE', 'Southeast', 7);
INSERT INTO "DirectionTypes" ("Id", "Abbreviation", "Description", "DisplayOrder")
VALUES (8, 'SW', 'Southwest', 8);

INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (1, '<b>There are two ways to navigate the UDOT Automated Traffic Location Performance Measures website</b><br/><br/><u>MAP</u><ol><li>Zoom in on the map and click on the desired intersection (note: the map can be filtered by selecting “metric type” ).</li><li>Select the available chart on the map from the list of available measures for the desired intersection.</li><li>Click a day and/or time range from the calendar.</li><li>Click “Create Chart”.  Wait, and then scroll down to see the data and charts.</li></ol><u>Location LIST</u><ol><li>Select the chart by clicking the checkbox for the desired chart.</li><li>Click the “Location List” bar at the top of the map window.</li><li>Click “Select” next to the desired intersection.</li><li>Click a day and/or time range from the calendar.</li><li>Click “Create Chart”.  Wait, and then scroll down to see the data and charts.</li></ol>', 1, '<b>How do I navigate the UDOT Automated Traffic Location Performance Measures website?</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (2, 'Automated Traffic Location Performance Measures show real-time and a history of performance at Locationized intersections.  The various measures will evaluate the quality of progression of traffic along the corridor, and displays any unused green time that may be available from various movements. This information informs UDOT of vehicle and pedestrian detector malfunctions, measures vehicle delay and lets us know volumes, speeds and travel time of vehicles.   The measures are used to optimize mobility and manage traffic Location timing and maintenance to reduce congestion, save fuel costs and improve safety.  There are several measures currently in use with others in development. ', 2, '<b>What are Automated Traffic Location Performance Measures</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (3, 'The traffic Location controller manufactures (Econolite, Intelight, Siemens, McCain, TrafficWare and some others) wrote a “data-logger” program that runs in the background of the traffic Location controller firmware. The Indiana Traffic Location Hi Resolution Data Logger Enumerations (http://docs.lib.purdue.edu/cgi/viewcontent.cgi?article=1002&context=jtrpdata) encode events to a resolution to the nearest 100 milliseconds.  The recorded enumerations will have events for “phase begin green”, “phase gap out”, “phase max out”, “phase begin yellow clearance”, “phase end yellow clearance”, “pedestrian begin walk”, “pedestrian begin clearance”, “detector off”, “detector on”, etc.  For each event, a time-stamp is given and the event is stored temporarily in the Location controller.  Over 125 various enumerations are currently in use.  Then, using an FTP connection from a remote server to the traffic Location controller, packets of the hi resolution data logger enumerations (with its 1/10th second resolution time-stamp) are retrieved and stored on a web server at the UDOT Traffic Operations Center about every 10 to 15 minutes (unless the “upload current data” checkbox is enabled, where an FTP connection will be immediately made and the data will be displayed in real-time).  Software was written in-house by UDOT that allows us to graph and display the various data-logger enumerations and to show the results on the UDOT Automated Traffic Location Performance Measures website.', 3, '<b>How do Automated Traffic Location Performance Measures work?</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (4, 'A central traffic management system is not used or needed for the UDOT Automated Traffic Location Performance Measures.  It is all being done through FTP connections from a web server through the network directly to the traffic Location controller which currently has the Indiana Traffic Location Hi Resolution Data Logger Enumerations running in the background of the controller firmware.  The UDOT Automated Traffic Location Performance Measures are independent of any central traffic management system.
', 4, '<b>Which central traffic management system is used to get the Automated Traffic Location Performance Measures</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (5, 'In 2011, UDOT’s executive director assigned a Quality Improvement Team (QIT) to make recommendations that will result in UDOT providing “world-class traffic Location maintenance and operations”.  The QIT evaluated existing operations, national best practices, and NCHRP recommendations to better improve UDOT’s Location maintenance and operations practices.  One of the recommendations from the QIT was to “implement real-time monitoring of system health and quality of operations”.  The real-time Automated Location Performance Measures allow us to greatly improve the quality of Location operations and to also know when equipment such as pedestrian detection or vehicle detection is not working properly.  We are simply able to do more with less and to manage traffic more effectively 24/7.  In addition, we are able to optimize intersections and corridors when they need to be re-optimized, instead of on a set schedule.', 5, '<b>Why does Utah need Automated Traffic Location Performance Measures?</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (6, 'The UDOT Automated Traffic Location Measures software was developed in-house at UDOT by the Department of Technology Services.  Purdue University and the Indiana Department of Transportation (INDOT) assisted in getting us started on this endeavor.', 6, '<b>Where did you get the Automated Traffic Location Performance Measure software?</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (7, 'The Purdue coordination diagram concept was introduced in 2009 by Purdue University to visualize the temporal relationship between the coordinated phase indications and vehicle arrivals on a cycle-by-cycle basis.  The Indiana Traffic Location HI Resolution Data Logger Enumerations (http://docs.lib.purdue.edu/cgi/viewcontent.cgi?article=1002&context=jtrpdata) was a joint transportation research program (updated in November 2012 but started earlier) that included people from Indiana DOT, Purdue University, Econolite, PEEK, and Siemens.  <br/><br/>After discussions with Dr. Darcy Bullock from Purdue University and INDOT’s James Sturdevant, UDOT started development of the UDOT Automated Location Performance Measures website April of 2012.', 7, '<b>How did the Automated Traffic Location Performance Measures Begin?</b> ');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (8, 'UDOT’s goal is transparency and unrestricted access to all who have a desire for traffic Location data.  Our goal in optimizing mobility, improving safety, preserving infrastructure and strengthening the economy means that all who have a desire to use the data should have access to the data without restrictions.  This includes all of UDOT (various divisions and groups), consultants, academia, MPO’s, other jurisdictions, FHWA, the public, and others.  It is also UDOT’s goal to be the most transparent Department of Transportation in the country.  Having a website where real-time Automated Location Performance Measures can be obtained without special software, passwords or restricted firewalls will help UDOT in achieving the goal of transparency, and allows everyone access to the data without any silos.', 8, '<b>Why are there no passwords or firewalls to access the website and see the measures?</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (9, 'There are many uses and benefits of the various measures.  Some of the key uses are:<br/><br/><u>Purdue Coordination Diagrams (PCD’s)</u> – Used to visualize the temporal relationship between the coordinated phase indications and vehicle arrivals on a cycle-by-cycle basis.  The PCD’s show the progression quality along the corridor and answer questions, such as “What percent of vehicles are arriving during the green?” or “What is the platoon ratio during various coordination patterns?” The PCD’s are instrumental in optimizing offsets, identifying oversaturated or under saturated splits for the coordinated phases, the effects of early return of green and coordinated phase actuations, impacts of queuing, adjacent Location synchronization, etc.<br/> <br/>In reading the PCD’s, between the green and yellow lines, the phase is green; between the yellow and red lines, the phase is yellow; and underneath the green line, the phase is red.  The long vertical red lines during the late night hours is showing the main street sitting in green as the side streets and left turns are being skipped.  The short vertical red lines show skipping of the side street / left turns or a late start of green for the side street or left turn.  AoG is the percent of vehicles arriving during the green phase.  GT is the percent of green split time for the phase and PR is the Platoon Ratio (Equation 15-4 from the 2000 Highway Capacity Manual).<br/><br/><u>Approach Volumes</u> – Counts the approach vehicle volumes as shown arriving upstream of the intersection about 350 ft – 400 ft.  The detection zones are in advance of the turning lanes, so the approach volumes don’t know if the vehicles are going straight through, turning left or right.  The accuracy of the approach volumes tends to undercount under heavy traffic and under multi-lane facilities.  Approach volumes are used in traffic models, as well as identifying directional splits in traffic. In addition, the measure is also used in evaluating the least disruptive time to allow lanes to be taken for maintenance and construction activities.<br/><br/><u/>Approach Speeds</u> – The speeds are obtained from the Wavetronix radar Advance Smartsensor.  As vehicles cross the 10-foot wide detector in advance of the intersection (350 ft – 400 ft upstream of the stop bar), the speed is captured, recorded, and time-stamped.  In graphing the results, a time filter is used that starts 15 seconds (user defined) after the initial green to the start of the yellow.  The time filter allows for free-flow speed conditions to be displayed that are independent of the traffic Location timings.  The approach speed measure is beneficial in knowing the approach speeds to use for modeling purposes – both for normal time-of-day coordination plans and for adverse weather or special event plans.  They are also beneficial in knowing when speed conditions degrade enough to warrant a change in time-of-day coordination plans to adverse weather or special event plans.  In addition, the speed data is used to set yellow and all-red intervals for Location timing, as well as for various speed studies.<br/><br/><u>Purdue Phase Termination Charts</u> – Shows how each phase terminates when it changes from green to red.  The measure will show if the termination occurred by a gapout, a maxout / forceoff, or skip.  A gapout means that not all of the programmed time was used.  A maxout occurs during fully actuated (free) operations, while forceoff’s occur during coordination.  Both a maxout and forceoff shows that all the programmed time was used. A skip means that the phase was not active and did not turn on.  In addition, the termination can be evaluated by consecutive occurrences in a approach.  For example, you can evaluate if three (range is between 1 and 5) gapouts or skips occurred in a approach.  This feature is helpful in areas where traffic volume fluctuations are high.  Also shown are the pedestrian activations for each phase.  What this measure does not show is the amount of gapout time remaining if a gapout occurred.  The Split Monitor measure is used to answer that question.<br/><br/>This measure is used to identify movements where split time may need to be taken from some phases and given to other phases.  Also, this measure is very useful in identifying problems with vehicle and pedestrian detection.  For example, if the phase is showing constant maxouts all night long, it is assumed that there is a detection problem.<br/><br/><u>Split Monitor</u> – This measure shows the amount of split time (green, yellow and all-red) used by the various phases at the intersection.  Greens show gapouts, reds show maxouts, blues show forceoffs and yellows show pedestrian activations.  This measure is useful to know the amount of split time each phase uses.Turning Movement Volume Counts – this measure shows the lane-by-lane vehicles per hour (vph) and total volume for each movement.  Three graphs are available for each approach (left, thru, right).  Also shown for each movement are the total volume, peak hour, peak hour factor and lane utilization factor.  The lane-by-lane volume counts are used for traffic models and traffic studies.<br/><br/><u>Approach Delay</u> – This measure shows a simplified approach delay by displaying the time between detector activations during the red phase and when the phase turns green for the coordinated movements.  This measure does not account for start-up delay, deceleration, or queue length that exceeds the detection zone.  This measure is beneficial in evaluating over time the delay per vehicle and delay per hour values for each coordinated approach.<br/><br/><u>Arrivals on Red</u> – This measure shows the percent of vehicles arriving on red (inverse of % vehicles arriving on green) and the percent red time for each coordination pattern.  The Y axis is graphing the volume (vph) and the secondary Y axis graphs the percent vehicles arriving on red.  This measure is useful in identifying areas where the progression quality is poor.<br/><br/><u>Yellow and Red Actuations</u> – This measure plots vehicle arrivals during the yellow and red portions of an intersection''s movements where the speed of the vehicle is interpreted to be too fast to stop before entering the intersection. It provides users with a visual indication of occurrences, violations, and several related statistics. The purpose of this chart is to identify engineering countermeasures to deal with red light running.<br/><br/><u>Purdue Split Failure</u> – This measure calculates the percent of time that stop bar detectors are occupied during the green phase and then during the first five seconds of red. This measure is a good indication that at least one vehicle did not clear during the green.', 9, '<b>How do you use the various Location Performance Measures and what do they do?</b> ');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (10, 'The Automated Location Performance Measures are an effective way to reduce congestion, save fuel costs and improve safety.  We are simply able to do more with less and are more effectively able to manage traffic every day of the week and at all times of the day, even when a traffic Location engineer is not available.  We have identified several detection problems, corrected time-of-day coordination errors in the traffic Location controller scheduler, corrected offsets, splits, among other things.  In addition, we have been able to use more accurate data in optimizing models and doing traffic studies, and have been able to more correctly set various Location timing parameters.', 10, '<b>How effective are Automated Traffic Location Performance Measures</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (11, 'Although the UDOTAutomated Traffic Location Performance Measures cannot guarantee you will only get green lights, the system does help make traveling through Utah more efficient.  UDOT Automatic Location Performance Measures have already already helped to reduce the number of stops and delay at Locationized intersections.  Continued benefits are anticipated.', 11, '<b>Does this mean I never have to stop at a red light?</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (12, 'Yes, UDOT Automated Traffic Location Performance Measures has already saved Utahans time and money.  By increasing corridor speeds while reducing intersection delays, traffic Location stops, and the ability to monitor operations 24/7.', 12, '<b>Will Automated Traffic Location Performance Measures save me money?  If so, how are cost savings measured?</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (13, 'By reducing congestion and reducing the percent of vehicles arriving on a red light, UDOT Automated Traffic Location Performance Measures helps decrease the number of accidents that occur.  In addition, we are better able to manage detector failures and improve the duration of the change intervals and clearance times at intersections.', 13, '<b>How do Automated Traffic Location Performance Measures enhance safety?</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (14, 'UDOT Automated Traffic Location Performance Measures are designed to increase the safety and efficiency at Locationized intersections.  It is not intended to identify speeders or enforce traffic laws.  No personal information is recorded or used in data gathering.', 14, '<b>Can real-time Automated Traffic Location Performance Measures be used as a law enforcement tool?</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (15, 'We can estimate that each Location controller high resolution data requires approximately 19 MB of storage space each day.  For the UDOT system, we have approximately 2040 traffic Locations bringing back about 1 TB of data per month. In addition to the high resolution data, version 4.2.0 and above also allows for the data to be rolled up into aggregated tables in 15-minute bins. UDOT averages approximately 6 GB of aggregated tables per month. UDOT uses a SAN server that holds approximately 40 TB that runs SQL 2016. Our goal is to keep between 24 months and 36 months of high resolution data files and then to cold storage the old high resolution  data files for up to five years after that. The cold storage flat files (comma deliminated file with no indexing) will require about 2 TB of storage per year. UDOT plans on keeping the aggregated tables in 15-minute bins indefinitely. ', 15, '<b>Server and Data Storage Requirements</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (16, 'The data has been useful for some of the following users in Utah:<br/><br/><ul><li><u>Location engineers</u> in optimize and fine-tuning Location timing.</li><li><u>Maintenance Location technicians</u> in identifying broken detector problems and investigating trouble calls.</li><li><u>Traffic engineers</u> in conducting various traffic studies, such as speed studies, turning movement studies, modeling studies, and optimizing the intersection operations.</li><li><u>Consultants</u> in improving traffic Location operations, as UDOT outsources some of the Location operations, design and planning to consultants.</li><li><u>UDOT Traffic & Safety, UDOT Traffic Engineers, UDOT Resident Construction Engineers</u> in conducting various traffic studies and/or in determining the time-of-day where construction or maintenance activities would be least disruptive to the traveling motorists.</li><li><u>Metropolitan Planning Organizations</u> (MPO’s) in calibrating the regional traffic models.</li><li><u>Academia</u> in conducting various research studies, such as evaluating the effectiveness of operations during adverse weather, evaluating the optimum Location timing for innovative intersections such as DDI’s, CFI’s and Thru-Turns, etc.</li><li><u>City and County</u> Government in using the data in similar manner to UDOT.</li></ul>', 16, '<b>Who uses the Automated Traffic Location Performance Measures data?</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (17, '<table class=''table table-bordered''>
 	                            <tr>
                                    <th> MEASURE </th>
                                    <th> DETECTION NEEDED </th>
                                </tr>
                                <tr>
                                    <td> Purdue Coordination Diagram </td>
                                    <td> Setback count (350 ft – 400 ft) </td>
                                </tr>
                                <tr>
                                    <td> Approach Volume </td>
                                    <td> Setback count (350 ft – 400 ft) </td>
                                </tr>
                                <tr>
                                    <td> Approach Speed </td>
                                    <td> Setback count (350 ft – 400 ft) using radar </td>
                                </tr>
                                <tr>
                                    <td> Purdue Phase Termination </td>
                                    <td> No detection needed or used </td>
                                </tr>
                                <tr>
                                    <td> Split Monitor </td>
                                    <td> No detection needed or used </td>
                                </tr>
                                <tr>
                                    <td> Turning Movement Counts </td>
                                    <td> Stop bar (lane-by-lane) count </td>
                                </tr>
                                <tr>
                                    <td> Approach Delay </td>
                                    <td> Setback count (350 ft – 400 ft) </td>
                                </tr>
                                <tr>
                                    <td> Arrivals on Red </td>
                                    <td> Setback count (350 ft – 400 ft) </td>
                                </tr>
                                <tr>
                                    <td> Yellow and Red Actuations </td>
                                    <td> Stop bar (lane-by-lane) count that is either in front of the stop bar or has a speed filter enabled </td>
                                </tr>
                                <tr>
                                    <td> Purdue Split Failure </td>
                                    <td> Stop bar presence detection, either by lane group or individual lane </td>
                                </tr>
                        </table>
                        <b> Automated Traffic Location Performance Measures will work with any type of detector that is capable of counting vehicles, e.g., loops, video, pucks, radar. (The only exception to this is the speed measure, where UDOT’s Automated Location Performance Measures for speeds will only work with the Wavetronix Advance SmartSensor.) Please note that two of the measures (Purdue Phase Termination and Split Monitor) do not use detection and are extremely useful measures.</b>', 17, '<b>What are the detection requirements for each metric?</b> ');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (18, 'Some measures have different detection requirements than other measures. For example, for approach speeds, UDOT uses the Wavetronix Advance Smartsensor radar detector and has been using this detector since 2006 for dilemma zone purposes if the design speed is 40 mph or higher.  This same detector is what we use for our setback counts 350 feet – 400 feet upstream of the intersection.  In addition, we are also able to pull the raw radar speeds from the sensor back to the TOC server for the speed data.  Not all intersections have the Wavetronix Advance Smartsensors, therefore we are not able to display speed data, as well as the PCD’s, approach volume, arrivals on red or approach delay at each intersection.<br/><br/>The turning movement count measure requires lane-by-lane detection capable of counting vehicles in each lane.  Configuring the detection for lane-by-lane counts is time consuming and takes a commitment to financial resources.', 18, '<b>Why do some intersections only show a few metrics and others have more?</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (19, ' <b> System Requirements:</b>
                        <b> Operating Systems and Software:</b>
                        The UDOT Automated Location Performance Measures system runs on Microsoft Windows Servers.
                        The web components are hosted by Microsoft Internet Information Server(IIS).
                        The database server is a Microsoft SQL 2016 server.
                        <b> Storage and Processing:</b>
                        Detector data uses about 40 % of the storage space of the UDOT system,
                        so the number of detectors attached to a controller will have a huge impact on the amount of storage space required.Detector data is also the most important information we collect.
                        We estimate that each Location will generate 19 MB of data per day.
                        The amount of processing power required is highly dependant on how many Locations are on the system,
                        how many servers will be part of the system,
                        and how many people will be using the system.  It is possible to host all of the system functions on one powerful server, or split them out into multiple, less expensive servers.  If your agency decided to make the Automated Location Performance Measures available to the public, it might be best to have a web server separate from the database server.Much of the heavy processing for the charts is done by web services, and it is possible to host these services on a dedicated computer.
                        While each agency should consult with their IT department for specific guidelines on how to best deliver a secure, stable and responsive solution, we can estimate that most mid-range to high-end servers will be able to handle the task of hosting and creating measures for most agencies.<ul>
                        <li>Windows Server 2008 or newer installed</li>
                        <li>.NET 4.5.2 Framework installed</li>
                        <li>IIS 7 or better installed, along with ASP.NET 4.0 or later</li>
                        <li>SQL Server Express, SQL Server 2008 R2, or newer installed</li>
                        <li>Firewall exceptions for connections to the controllers</li>
                        <li>If Watchdog features are desired, installation requires access to an SMTP (email) server. It will accept email from the Automated Location Performance Measures (ATSPM) server. The SMTP server can reside on the same machine.</li>
                        <li>Microsoft Visual Studio 2013 or later is recommended</li></ul>', 19, '<b>What are the System Requirements?</b>');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (20, 'You can contact UDOT’s Traffic Location Operations Engineer, Mark Taylor at marktaylor@utah.gov or phone at 801-887-3714 to find out more information about Automated Location Performance Measures.', 20, '<b>Who do I contact to find out more information about Automated Traffic Location Performance Measures</b> ');
INSERT INTO "Faqs" ("Id", "Body", "DisplayOrder", "Header")
VALUES (21, 'You can download the source code at GitHub at: https://github.com/udotdevelopment/ATSPM. GitHub is more for development and those interested in further developing and modifying the code. We encourage developers to contribute the enhancements back to GitHub so others can benefit as well.  For those interested in the executable ATSPM files, those are found on the FHWA''s open source portal at: https://www.itsforge.net/index.php/community/explore-applications#/30.', 21, '<b>How do I get the source code for the Automated Traffic Location Performance Measures Website?</b> ');

INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (1, 'PPT', 1, 'Purdue Phase Termination', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (2, 'SM', 5, 'Split Monitor', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (3, 'PedD', 10, 'Pedestrian Delay', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (4, 'PD', 15, 'Preemption Details', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (5, 'TMC', 40, 'Turning Movement Counts', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (6, 'PCD', 60, 'Purdue Coordination Diagram', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (7, 'AV', 45, 'Approach Volume', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (8, 'AD', 50, 'Approach Delay', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (9, 'AoR', 55, 'Arrivals On Red', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (10, 'Speed', 65, 'Approach Speed', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (11, 'YRA', 35, 'Yellow and Red Actuations', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (12, 'SF', 30, 'Purdue Split Failure', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (13, 'LP', 70, 'Purdue Link Pivot', FALSE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (14, 'PSR', 80, 'Preempt Service Request', FALSE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (15, 'PS', 75, 'Preempt Service', FALSE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (16, 'DVA', 85, 'Detector Activation Count', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (17, 'TAA', 20, 'Timing And Actuation', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (18, 'APCD', 102, 'Approach Pcd', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (19, 'CA', 103, 'Approach Cycle', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (20, 'SFA', 104, 'Approach Split Fail', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (22, 'PreemptA', 105, 'Location Preemption', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (24, 'TSPA', 106, 'Location Priority', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (25, 'ASA', 107, 'Approach Speed', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (26, 'YRAA', 108, 'Approach Yellow Red Activations', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (27, 'SEC', 109, 'Location Event Count', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (28, 'AEC', 110, 'Approach Event Count', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (29, 'AEC', 111, 'Phase Termination', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (30, 'APD', 112, 'Phase Pedestrian Delay', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (31, 'LTGA', 112, 'Left Turn Gap Analysis', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (32, 'WT', 113, 'Wait Time', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (33, 'GVD', 115, 'Gap Vs Demand', FALSE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (34, 'LTG', 114, 'Left Turn Gap', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (35, 'SM', 120, 'Split Monitor', TRUE, FALSE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (36, 'GTU', 130, 'Green Time Utilization', FALSE, TRUE);
INSERT INTO "MeasureType" ("Id", "Abbreviation", "DisplayOrder", "Name", "ShowOnAggregationSite", "ShowOnWebsite")
VALUES (37, 'RM', 131, 'Ramp Metering', FALSE, TRUE);

INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (4, 8, 'binSize', '15');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (10, 10, 'binSize', '15');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (18, 7, 'binSize', '15');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (19, 7, 'showAdvanceDetection', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (20, 7, 'showDirectionalSplits', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (21, 7, 'showNbEbVolume', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (22, 7, 'showSbWbVolume', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (23, 7, 'showTMCDetection', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (24, 7, 'showTotalVolume', 'FALSE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (27, 31, 'binSize', '15');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (28, 31, 'gap1Max', '3.3');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (29, 31, 'gap1Min', '1');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (30, 31, 'gap2Max', '3.7');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (31, 31, 'gap2Min', '3.3');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (32, 31, 'gap3Max', '7.4');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (33, 31, 'gap3Min', '3.7');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (34, 31, 'gap4Min', '7.4');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (35, 31, 'trendLineGapThreshold', '7.4');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (36, 6, 'binSize', '15');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (39, 6, 'showPlanStatistics', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (40, 6, 'showVolumes', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (43, 3, 'pedRecallThreshold', '75');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (44, 3, 'showCycleLength', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (45, 3, 'showPedBeginWalk', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (46, 3, 'showPedRecall', 'FALSE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (47, 3, 'showPercentDelay', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (48, 3, 'timeBuffer', '15');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (50, 1, 'selectedConsecutiveCount', '1');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (54, 12, 'firstSecondsOfRed', '5');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (55, 12, 'showAvgLines', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (56, 12, 'showFailLines', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (57, 12, 'showPercentFailLines', 'FALSE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (58, 2, 'percentileSplit', '85');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (69, 17, 'extendStartStopSearch', '2');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (71, 17, 'showAdvancedCount', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (72, 17, 'showAdvancedDilemmaZone', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (73, 17, 'showAllLanesInfo', 'FALSE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (76, 17, 'showLaneByLaneCount', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (79, 17, 'showPedestrianActuation', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (80, 17, 'showPedestrianIntervals', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (83, 17, 'showStopBarPresence', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (85, 5, 'binSize', '15');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (92, 11, 'severeLevelSeconds', '5');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (102, 8, 'getVolume', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (103, 8, 'getPermissivePhase', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (104, 9, 'usePermissivePhase', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (105, 9, 'showPlanStatistics', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (106, 9, 'binSize', '15');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (107, 6, 'showArrivalsOnGreen', 'TRUE');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (113, 36, 'xAxisBinSize', '15');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (114, 36, 'yAxisBinSize', '4');
INSERT INTO "MeasureOptions" ("Id", "MeasureTypeId", "Option", "Value")
VALUES (115, 32, 'binSize', '15');

CREATE INDEX "IX_Approaches_DirectionTypeId" ON "Approaches" ("DirectionTypeId");

CREATE INDEX "IX_Approaches_LocationId" ON "Approaches" ("LocationId");

CREATE INDEX "IX_AreaLocation_LocationsId" ON "AreaLocation" ("LocationsId");

CREATE INDEX "IX_DetectionTypeDetector_DetectorsId" ON "DetectionTypeDetector" ("DetectorsId");

CREATE INDEX "IX_DetectionTypeMeasureType_MeasureTypesId" ON "DetectionTypeMeasureType" ("MeasureTypesId");

CREATE INDEX "IX_DetectorComments_DetectorId" ON "DetectorComments" ("DetectorId");

CREATE INDEX "IX_Detectors_ApproachId" ON "Detectors" ("ApproachId");

CREATE INDEX "IX_DeviceConfigurations_ProductId" ON "DeviceConfigurations" ("ProductId");

CREATE INDEX "IX_Devices_DeviceConfigurationId" ON "Devices" ("DeviceConfigurationId");

CREATE INDEX "IX_Devices_LocationId" ON "Devices" ("LocationId");

CREATE INDEX "IX_Locations_JurisdictionId" ON "Locations" ("JurisdictionId");

CREATE INDEX "IX_Locations_LocationTypeId" ON "Locations" ("LocationTypeId");

CREATE INDEX "IX_Locations_RegionId" ON "Locations" ("RegionId");

CREATE INDEX "IX_MeasureCommentMeasureType_MeasureTypesId" ON "MeasureCommentMeasureType" ("MeasureTypesId");

CREATE INDEX "IX_MeasureComments_LocationIdentifier" ON "MeasureComments" ("LocationIdentifier");

CREATE INDEX "IX_MeasureOptions_MeasureTypeId" ON "MeasureOptions" ("MeasureTypeId");

CREATE INDEX "IX_MenuItems_ParentId" ON "MenuItems" ("ParentId");

CREATE UNIQUE INDEX "IX_RouteDistances_LocationIdentifierA_LocationIdentifierB" ON "RouteDistances" ("LocationIdentifierA", "LocationIdentifierB");

CREATE INDEX "IX_RouteLocations_NextLocationDistanceId" ON "RouteLocations" ("NextLocationDistanceId");

CREATE INDEX "IX_RouteLocations_OpposingDirectionId" ON "RouteLocations" ("OpposingDirectionId");

CREATE INDEX "IX_RouteLocations_PreviousLocationDistanceId" ON "RouteLocations" ("PreviousLocationDistanceId");

CREATE INDEX "IX_RouteLocations_PrimaryDirectionId" ON "RouteLocations" ("PrimaryDirectionId");

CREATE INDEX "IX_RouteLocations_RouteId" ON "RouteLocations" ("RouteId");

CREATE UNIQUE INDEX "IX_RouteLocations_RouteId_LocationIdentifier" ON "RouteLocations" ("RouteId", "LocationIdentifier");

CREATE INDEX "IX_UserAreas_AreaId" ON "UserAreas" ("AreaId");

CREATE INDEX "IX_UserJurisdictions_JurisdictionId" ON "UserJurisdictions" ("JurisdictionId");

CREATE INDEX "IX_UserRegions_RegionId" ON "UserRegions" ("RegionId");

CREATE INDEX "IX_VersionHistory_ParentId" ON "VersionHistory" ("ParentId");

SELECT setval(
    pg_get_serial_sequence('"Faqs"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "Faqs") + 1,
        nextval(pg_get_serial_sequence('"Faqs"', 'Id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('"MeasureType"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "MeasureType") + 1,
        nextval(pg_get_serial_sequence('"MeasureType"', 'Id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('"MeasureOptions"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "MeasureOptions") + 1,
        nextval(pg_get_serial_sequence('"MeasureOptions"', 'Id'))),
    false);

INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240805192711_V5_Initial', '7.0.14');

COMMIT;

