{
  "ConnectionStrings": {
    "SourceConnectionString": "Data Source=srwtcmoedb.utah.utad.state.ut.us;Initial Catalog=MOE;User ID=spm;Password=UdotNewMoeDb!9;Connect Timeout=60;Encrypt=False;TrustServerCertificate=False;ApplicationIntent=ReadWrite;MultiSubnetFailover=False",
    //"TargetAvenueDBConnectionString": "Data Source=10.10.10.23;Initial Catalog=MOE;User ID=spm;Password=spm;Connect Timeout=30;Encrypt=False;TrustServerCertificate=False;ApplicationIntent=ReadWrite;MultiSubnetFailover=False",
    "TargetConfigDBConnectionString": "Host=34.106.25.230;Port=5432;Username=admin;Password=Avenue.2006;Database=ATSPM-Config-V2;Pooling=true;Include Error Detail=true;",
    //"TargetSpeedDBConnectionString": "Host=34.106.25.230;Port=5432;Username=admin;Password=Avenue.2006;Database=ATSPM-SpeedLogs;Pooling=true;Include Error Detail=true;",
    "TargetEventLogDBConnectionString": "Host=34.106.25.230;Port=5432;Username=admin;Password=Avenue.2006;Database=ATSPM-EventLogs-V1;Pooling=true;Include Error Detail=true;",
    //"TargetAggregationDBConnectionString": "Host=34.106.25.230;Port=5432;Username=admin;Password=Avenue.2006;Database=ATSPM-Aggregation-V1;Pooling=true;Include Error Detail=true;",
    //"TargetDBConnectionString": "Host=34.106.25.230;Port=5432;Username=admin;Password=Avenue.2006;Database=ATSPM-EventLogs-V1;Pooling=true;Include Error Detail=true;",

    "ConfigContext": {
      "Provider": "PostgreSQL",
      "ConnectionString": "Host=34.106.25.230;Port=5432;Username=admin;Password=Avenue.2006;Database=ATSPM-Config-V2;Pooling=true;CommandTimeout=300;Timeout=300;"
    },
    "AggregationContext": {
      "Provider": "PostgreSQL",
      "ConnectionString": "Host=34.106.25.230;Port=5432;Username=admin;Password=Avenue.2006;Database=ATSPM-Aggregation-Speed;Pooling=true;CommandTimeout=300;Timeout=300;"
    },
    "EventLogContext": {
      "Provider": "PostgreSQL",
      "ConnectionString": "Host=34.106.25.230;Port=5432;Username=admin;Password=Avenue.2006;Database=ATSPM-EventLogs-V1;Pooling=true;CommandTimeout=300;Timeout=300;"
    },
    "IdentityContext": {
      "Provider": "PostgreSQL",
      "ConnectionString": "Host=34.106.25.230;Port=5432;Username=admin;Password=Avenue.2006;Database=ATSPM-Identity;Pooling=true;CommandTimeout=300;Timeout=300;"
    }
  },
  "JurisdictionIds": {
    "1": 1,
    "2": 2,
    "3": 3,
    "4": 4,
    "5": 5,
    "6": 6,
    "7": 7,
    "8": 8,
    "9": 9,
    "10": 10,
    "11": 11,
    "12": 12,
    "13": 13,
    "14": 14,
    "15": 15,
    "16": 16,
    "17": 17,
    "18": 18,
    "19": 19,
    "20": 20,
    "21": 21,
    "22": 22,
    "23": 23,
    "24": 24,
    "25": 25,
    "26": 26,
    "27": 27,
    "28": 28,
    "29": 29,
    "30": 30,
    "31": 31,
    "32": 32,
    "33": 33,
    "34": 34,
    "35": 35,
    "36": 36,
    "37": 37,
    "38": 38,
    "39": 39,
    "40": 40,
    "41": 41,
    "42": 42,
    "43": 43,
    "44": 44,
    "45": 45,
    "46": 46
  },
  "LocationQuery": "SELECT VersionID + {IdRange} as VersionID, {PrependIdentifier} + SignalId as SignalId, PrimaryName, SecondaryName, 1 as LocationType, Enabled, {TargetJurisdictionId} as JurisdictionId, ISNULL(TRY_CONVERT(float, Latitude),0) as Latitude, ISNULL(TRY_CONVERT(float, Longitude),0) as Longitude, Pedsare1to1,  RegionId,  Start, VersionActionId, 1 as LocationTypeId FROM [moe].dbo.Signals where JurisdictionId = {jurisdictionId}",
  "SpeedDevicesQuery": "Select 'Active' as Status, s.[VersionID] + {IdRange} as LocationId, s.[VersionID] + {IdRange} as VersionID,s.[SignalID],[Latitude],[Longitude],[PrimaryName],[SecondaryName],'127.0.0.1' as IPAddress,[RegionID],[ControllerTypeID],[Enabled],  1 AS LoggingEnabled,[VersionActionId],[Note],[Start],[JurisdictionId],[Pedsare1to1], 1 as LocationTypeId, 'WavetronixSpeed' as DeviceType FROM [Signals] s Join [dbo].[Approaches] a on s.VersionID = a.VersionID Join [dbo].[Detectors] d on a.ApproachID = d.ApproachID Join [dbo].[DetectionTypeDetector] dtd on d.ID = dtd.ID WHERE TRY_CAST(Latitude AS FLOAT) != 0.0 And dtd.DetectionTypeID = 3 and JurisdictionId = {jurisdictionId} group by s.[VersionID], s.[VersionID],s.[SignalID],[Latitude],[Longitude],[PrimaryName],[SecondaryName], IPAddress,[RegionID],[ControllerTypeID],[Enabled],[VersionActionId],[Note],[Start],[JurisdictionId],[Pedsare1to1]",
  "DevicesQuery": "Select 'Active' as Status, [VersionID] + {IdRange} as LocationId, [VersionID] + {IdRange} as VersionID,[SignalID],[Latitude],[Longitude],[PrimaryName],[SecondaryName],'127.0.0.1' as IPAddress,[RegionID],[ControllerTypeID],[Enabled],  1 AS LoggingEnabled,[VersionActionId],[Note],[Start],[JurisdictionId],[Pedsare1to1], 1 as LocationTypeId,'SignalController' as DeviceType FROM [Signals] WHERE TRY_CAST(Latitude AS FLOAT) != 0.0 and JurisdictionId = {jurisdictionId}",
  "ApproachesQuery": "Select a.ApproachID + {IdRange} as ApproachID, a.VersionId + {IdRange} as VersionID, a.DirectionTypeID, a.Description, a.MPH, a.ProtectedPhaseNumber, a.IsProtectedPhaseOverlap, a.PermissivePhaseNumber, a.IsPermissivePhaseOverlap, a.PedestrianPhaseNumber, a.IsPedestrianPhaseOverlap, a.PedestrianDetectors from Approaches a join Signals s on s.VersionID = a.VersionID  WHERE TRY_CAST(Latitude AS FLOAT) != 0.0 and JurisdictionId = {jurisdictionId}",
  "DetectorsQuery": "SELECT d.[ID] + {IdRange} as ID,d.[DetectorID],d.[DetChannel],d.[DistanceFromStopBar],d.[MinSpeedFilter],d.[DateAdded],d.[DateDisabled],d.[LaneNumber],COALESCE(d.[MovementTypeID], 6) AS MovementTypeID,COALESCE(d.[LaneTypeID], 1) AS LaneTypeID,d.[DecisionPoint],d.[MovementDelay],d.[ApproachID] + {IdRange} as ApproachID,d.[DetectionHardwareID],d.[LatencyCorrection] FROM [MOE].[dbo].[Detectors] d Join Approaches a on d.ApproachID = a.ApproachID Join Signals s on a.VersionID = s.VersionID WHERE TRY_CAST(Latitude AS FLOAT) != 0.0 and MovementTypeID is not null and JurisdictionId = {jurisdictionId}",
  "DetectionTypeMetricTypesQuery": "Select [DetectionType_DetectionTypeID], [MetricType_MetricID] From DetectionTypeMetricTypes",
  "DetectionTypeDetectorQuery": "Select DetectionTypeDetector.DetectionTypeId, DetectionTypeDetector.ID + {IdRange} as ID From Detectors d Join DetectionTypeDetector on d.ID = DetectionTypeDetector.ID Join Approaches a on d.ApproachID = a.ApproachID Join Signals s on a.VersionID = s.VersionID WHERE TRY_CAST(Latitude AS FLOAT) != 0.0 and d.MovementTypeID is not null and JurisdictionId = {jurisdictionId}",
  "AreaSignalsQuery": "SELECT Area_Id, Signal_VersionID + {IdRange} as Signal_VersionID FROM AreaSignals a Join Signals s on a.Signal_VersionID = s.VersionID where JurisdictionId = {jurisdictionId}",
  "DeleteCommand": "DELETE FROM \"CompressedEvents\" WHERE \"ArchiveDate\" = CURRENT_DATE - INTERVAL '15 days'",
  "Delete": true,
  "UpdateLocations": true,
  "UpdateGeneralConfiguration": true,
  "IdRange": "0",
  "PrependIdentifier": "''"
}
